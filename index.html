
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .mother{
            
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            margin: 10px;
        }
        .container{
            border: 1px solid gray;
            box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);
            padding: 10px;
            margin: 10px;
        }
      input[type=text]{
            border: none;
            text-align: center;
            width: 40px;
            pointer-events: none;
            
        }
       
    </style>
</head>
<body>
    <div class="mother">
        <div class="container" >
    <div class="a1" id="node0">
        <input type="range" id="a0" name="rangeInput" min="0" max="100"  onchange="updateTextInput(this);" value="100">
        <input type="text" id="aa0" value="">
       
    </div> 
    <div class="a1" id="node1">
        <input type="range" id="a1" name="rangeInput" min="0" max="100" onchange="updateTextInput(this);" value="0">
    <input type="text" id="aa1" value="">
    <button onclick="deleteElement(this);">Delete</button>
    </div>
    <div class="a2" id="node2">
        <input type="range" id="a2" name="rangeInput" min="0" max="100" onchange="updateTextInput(this);" value="0">
        <input type="text" id="aa2" value="">
        <button onclick="deleteElement(this);">Delete</button>
    </div>
    <div class="a3" id="node3">
    
        <input type="range" id="a3" name="rangeInput" min="0" max="100" onchange="updateTextInput(this);" value="0">
        <input type="text" id="aa3" value="">
        <button onclick="deleteElement(this);">Delete</button>
    </div>
    <div class="a4" id="node4">
        <input type="range" id="a4" name="rangeInput" min="0" max="100" onchange="updateTextInput(this);" value="0">
        <input type="text" id="aa4" value="">
        <button onclick="deleteElement(this);">Delete</button>
    </div> 
         </div>
         


    </div>




  
    <script src="https://cdn.jsdelivr.net/npm/linkifyjs@3.0.3/dist/linkify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/linkify-html@3.0.3/dist/linkify-html.min.js"></script>
    <script>
        function deleteElement(obj)
        {
            alert("Do you want to delete this?")
            let y=obj.parentElement.id;
            let element=document.getElementById(y).remove();
            initialStage()
            updateAllvalue()
           
           
        }
      
        function initialStage()
        {
            document.getElementById('a0').value=100;
            for(let i=1;i<5;i++)
            {
               
                let z='a'+i;
                let w= document.getElementById(z);
                if(w!=null){
                    w.value=0
                }
            }
        }
        var all=[];
        function updateAllvalue(){
            for(let a=0 ;a<5;a++)
        {
            let x='a'+a;
            let y=document.getElementById(x);
            if(y!=null)
            {
                all[a]=y.value;
                let w='a'+x;
                document.getElementById(w).value=y.value+'%';

            }
          
           
        }
        }
        updateAllvalue();
     
   


        function updateTextInput(obj) {
            var obje=obj;
            var idNum=obj.id[1];
             idNum=Number(idNum)
             var next=nextId(obj.id);
            var nextObj=document.getElementById(next);
           
           
             var change=obj.value-all[idNum];
            // var diff=nextObj.value-change;
        
                // if change minus mean komaichi...
                // if change positive mean barachi..

            while(change!=0)
            {
                console.log(nextObj.id)
                var w=nextObj.value;
                if(change > 0){ /// komate hobe
                    w=Number(w-change);
                    if(w < 0){
                        nextObj.value = 0;
                        change = Number(Math.abs(w));
                        updateAllvalue();
                    }else{
                        nextObj.value = Number(nextObj.value - change);
                        change = 0;
                        updateAllvalue();
                    }
                   
                }else{ /// barate hobe
                   // alert(nextObj.value);
                    //alert(Math.abs(change));
                    nextObj.value = Number(nextObj.value - change);
                    change = 0;
                   updateAllvalue();
                   
                    //alert(nextObj.value);
                    //w = Number(w+change)0
                }
                
             
                  let y=nextId(nextObj.id);
              nextObj=document.getElementById(y);
                 
                    
               
            }
        
           
     
        }  
        function nextId(id)
        {
          
            let n=Number(id[1]);
            n=n+1;
            let newId='a'+n;
            for(let i=n+1;i<6;i++)
            {
               var obj=document.getElementById(newId);
                if(obj==null){
                    newId='a'+i;
                    console.log(i)
                  
                }
                else{
                    return newId;
                   
                }
                
            }
            

            if(obj==null)
            {
            newId='a0';
            }

           return newId;
        }







   
</script>
</body>
</html>
